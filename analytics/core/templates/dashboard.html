{% extends "base.html" %} 
{% load static %} 
<style>
    .chart-container {
        width: 100%;  
        height: 250px;  /* Adjust height to fit the card */
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    #traffic-sources {
        width: 100% !important;
        height: 100% !important;
    }
    
</style>
{% block content %}

    <div class="my-3 mx-3">
      <h1>Dashboard</h1>
      <div class="d-flex">
        <!-- Card for Total Views -->
        <div class="col-3 mx-3">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title text-primary">Total Views</h5>
              <h6 class="card-subtitle mb-2 text-muted">Yearly</h6>
              <div>
                <canvas id="total-views-chart"></canvas>
              </div>
              <h1 class="card-text text-end">50,000,000</h1>
            </div>
          </div>
        </div>

        <!-- Card for Revenue -->
        <div class="col-3 mx-3">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title text-primary">Revenue</h5>
              <h6 class="card-subtitle mb-2 text-muted">Annual</h6>
              <div>
                <canvas id="revenue-chart"></canvas>
              </div>
              <h1 class="card-text text-end">$8,108</h1>
            </div>
          </div>
        </div>

        <!-- Card for Growth Rate -->
        <div class="col-3 mx-3">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title text-primary">Growth Rate</h5>
              <h6 class="card-subtitle mb-2 text-muted">Yearly</h6>
              <h1 class="card-text text-end text-success">79%</h1>
            </div>
          </div>
        </div>
      </div>

      <!-- Card for Subscriber Count -->
      <div class="mx-3 my-5">
        <h3 class="text-center">Subscriber Count</h3>
        <div class="bg-secondary bg-opacity-25 px-5 py-3 rounded">
          <canvas id="subscriber-count"></canvas>
        </div>
      </div>

      <!-- Row for Pie Chart and DataTable -->
      <div class="row">
        <!-- Pie Chart Column -->
        <div class="col-lg-6 mb-2">
            <div class="card p-3 d-flex justify-content-center align-items-center">
                <h6 class="text-center">Traffic Sources</h6>
                <div class="chart-container">
                    <canvas id="traffic-sources"></canvas>
                </div>
            </div>
        </div>
    
        <!-- DataTable Column -->
        <div class="col-lg-6 mb-3">
            <div class="card p-3">
                <b></b><h6 class="text-center">Most View Videos</h6></b>
                <table id="datatable" class="table table-striped">
                    <thead>
                        <tr>
                            <th>Video Title</th>
                            <th>Views</th>
                            <th>Likes</th>
                            <th>Comments</th>
                        </tr>
                    </thead>
                    <tbody>
                      <!-- Data will be populated via JavaScript -->
                    </tbody>
                </table>                
            </div>
        </div>
    </div>
    </div>


    {% block scripts %}
    <!-- jQuery (Required for DataTables) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"/>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <!-- Your Custom Script -->
    <script src="{% static 'js/index.js' %}"></script>
{% endblock scripts %}

{% endblock content %}
